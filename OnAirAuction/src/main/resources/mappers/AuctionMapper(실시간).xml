<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.kh.onairauction.dao.AuctionDAO">
  	<insert id="insertReport">
	  	insert into report(re_content, re_date, re_rc_num, re_me_id, re_report_id, re_report_product)
	  		values(#{r.re_content}, now(), #{r.re_rc_num}, #{r.re_me_id},
	  		#{r.re_report_id}, #{r.re_report_product})
  	</insert>
  	<insert id="insertMessage">
	  	insert into message(me_title, me_content, me_time, me_send_id, me_receive_id)
	  		values(#{m.me_title},#{m.me_content}, now(), #{m.me_send_id}, #{m.me_receive_id})
  	</insert>
  	<select id="selectAuctionRecord" resultType="kr.kh.onairauction.vo2.AuctionRecordVO">
	  	select * from auction_record where ar_au_num = #{auctionNum}
  	</select>
  	<select id="selectReportCategory" resultType="kr.kh.onairauction.vo2.ReportCategoryVO">
	  	select * from report_category
  	</select>
  	<select id="selectMember" resultType="kr.kh.onairauction.vo2.MemberVO">
  		select * from member where me_id = #{id}  <!-- 나중에 삭제 -->
  	</select>
  	<select id="selectSeller" resultType="kr.kh.onairauction.vo2.MemberVO">
  		select * from member where me_id = #{sellerId}
  	</select>
  	<select id="selectProduct" resultType="kr.kh.onairauction.vo2.ProductVO">
  		select * from product where pr_code = #{productCode}
  	</select>
  	<select id="selectMembership" resultType="kr.kh.onairauction.vo2.MembershipLevelVO">
  		select * from membership_level where  ml_name = #{levelName}
  	</select>
  	<select id="selectAccount" resultType="kr.kh.onairauction.vo2.VirtualAccountVO">
  		select * from virtual_account where  va_me_id = #{id}
  	</select>
  	<insert id="insertAuctionRecord">
	  	insert into auction_record(ar_bid_time, ar_bid_price, ar_me_id, ar_au_num)
	  		values(now(), #{p}, #{i}, #{n})
  	</insert>
  	<select id="selectAuction" resultType="kr.kh.onairauction.vo2.AuctionVO">
  		select * from auction where au_me_id = #{id} <!-- 나중에 삭제 -->
  	</select>
  	<select id="selectSellerLike" resultType="kr.kh.onairauction.vo2.SellerLikeVO">
  		select * from seller_like where sl_me_id = #{userId} and sl_seller_id = #{sellerId}
  	</select>
  	<insert id="insertSellerLike">
	  	insert into seller_like(sl_me_id, sl_seller_id, sl_state)
	  		values(#{userId}, #{sellerId}, #{num})
  	</insert>
  	<update id="updateSellerLike">
  		update seller_like
  			set
  				sl_state = #{sellerLikeState}
  			where
  				sl_me_id = #{s.sl_me_id} and sl_seller_id = #{s.sl_seller_id}
  	</update>
  	<select id="selectProductLike" resultType="kr.kh.onairauction.vo2.ProductLikeVO">
  		select * from product_like where pl_pr_code = #{productCode} and pl_me_id = #{userId}
  	</select>
  	<insert id="insertProductLike">
	  	insert into product_like(pl_pr_code, pl_me_id, pl_state)
	  		values(#{productCode}, #{userId}, #{num})
  	</insert>
  	<update id="updateProductLike">
  		update product_like
  			set
  				pl_state = #{productLikeState}
  			where
  				pl_pr_code = #{p.pl_pr_code} and pl_me_id = #{p.pl_me_id}
  	</update>
  	
</mapper>
